## Phoenix Cockpit: vault dialog, clown-car injection, Hive alert relay, and email send panel

### Summary
This commit represents a major feature and infrastructure upgrade for the Phoenix Cockpit and its supporting modules ‚Äî integrating agent source embedding, live Hive alerts, and improved deployment UX.

### Vault & Directive Management

- Vault dump now routed to dialog:
 - Replaced filesystem dump with an in-GUI popup (DumpVaultPopup), keeping user data private and quick to inspect.
 - No sensitive writes to disk ‚Äî useful for debugging without exposing credentials.

- Directive Manager cleanup:
 - Unified the Clown-Car and Hashbang logic from deploy_directive with consistent cached path verification.
 - Automatically validates and caches the last known agent root in the vault.
 - Added resilience dialogs to ensure all agent source files exist before deployment.

- Last directive memory:
 - Added last_directive_load_path (formerly last_boot_directive_path) to vault metadata for smarter file dialogs.
 - Phoenix now remembers your last loaded template location.

### Email System Integration
- New custom panel: EmailSend

 - Supports selecting existing email connections from the vault.

 - Automatically fills SMTP fields (host, port, username, password).

 - Password masking + üëÅ View toggle.

- Allows message composition and live dispatch through the agent network.

- Agent email_send rewrite:
  Hardened TLS context creation, added connection logging, handshake debug messages, and fail-safe fallbacks.
  Agents can now relay swarm alerts or send ad-hoc messages via SMTP securely (verified SSL/STARTTLS).

- Connection Manager expanded:
  Full email protocol support with dedicated UI for SMTP/IMAP settings and dynamic port defaults.

### Deployment System
- ‚ÄúClown-Car‚Äù source embedding (agent bundling):
  Added the ability to inject agent source code directly into the directive at deployment time.

 - Enables embedding of private or restricted agents.

 - Prevents dependency on external file availability at runtime.

 - Increases operational security by eliminating remote source fetches.

- Hashbang metadata:
  Integrated optional hashbang stamping for reproducible builds and runtime integrity checks.

- Deployment dialogs updated to verify agent paths, prompt users when missing, and auto-cache successful selections.

- Hive Alert & Dashboard Updates

 - Phoenix Dashboard (Static Panel) now consumes Hive/Swarm alerts:

 - Alerts appear in the feed with formatted messages and color levels.

 - Optional sound playback (cross-platform).

 - Unread alert indicator added to the dashboard tab (üî∫ glow effect).

 - Prevents duplicates by tracking recent alert hashes.

### Framework & Internal Refactors

- Packet Listener Resilience:
  Added a full recovery guard around handler execution to prevent agent threads from crashing due to bad packets.
  Crashes now log as [RECOVER] and quarantine the faulted packet for forensic replay.

- Session System (pre-work):
  Planning a refactor of SessionWindow deployment persistence and CRUD operations.
  We‚Äôll consolidate session-level deployment management under a VaultSyncChannel singleton to unify IPC updates.

- Miscellaneous Enhancements:

 - Dynamic Hive theme loading at runtime.

 - Deploy command previews standardized with copyable CLI snippets.

 - Added AgentRootSelector for reusable agent-path resolution and validation.

 - General code cleanup and docstrings with version markers (Authored by Daniel F. MacDonald & ChatGPT-5 aka The Generals).

### Upcoming Work

- Rewire SessionWindow‚Äôs deployment persistence to support live CRUD over VaultSyncChannel.

- Refactor legacy agent_email_check into a proper event-driven background agent.

- Add a dedicated Email Monitoring Panel for inbound IMAP triggers and alert correlation.

- Tighten vault sync acknowledgment loop between cockpit and sessions.

Summary Quote

 ‚ÄúPhoenix now embeds its agents, talks to the Hive, and sends mail from the swarm.
 Next, we wire its heart ‚Äî the VaultSync system.‚Äù
 ‚Äî The Generals, build log 11.02.25